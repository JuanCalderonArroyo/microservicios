<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Conexi√≥n a Microservicios</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles2.css') }}">
</head>
<body class="connect-bg">
  <div class="connect-card">
    <div class="icon">üêã</div>
    <h2>Gesti√≥n de Microservicios</h2>

    {% if not connected %}
      <!-- üü• Docker apagado -->
      <p>Docker no est√° disponible. Abre Docker Desktop e int√©ntalo de nuevo.</p>
      <form action="{{ url_for('connect') }}" method="post">
        <button type="submit" class="play-btn">Conectar</button>
      </form>

    {% elif connected and not levantados %}
      <!-- üü¶ Docker activo, pero a√∫n no levant√≥ microservicios -->
      <p>Docker detectado. ¬øDeseas levantar tus microservicios guardados?</p>
      <div class="btn-group">
        <form action="{{ url_for('connect') }}" method="post" style="display:inline;">
          <button type="submit" class="play-btn">Conectar</button>
        </form>
        <form action="{{ url_for('levantar') }}" method="post" style="display:inline;">
          <button type="submit" class="secondary-btn">Levantar guardados</button>
        </form>
      </div>

    {% elif connected and levantados %}
      <!-- üü© Microservicios ya levantados -->
      <p>‚úÖ Todos tus microservicios ya est√°n activos y en ejecuci√≥n.</p>
      <form>
        <button type="button" class="play-btn" disabled>Levantados</button>
      </form>
    {% endif %}

    <!-- Mensajes flash -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash-messages">
          {% for cat, msg in messages %}
            <p class="flash {{ cat }}">{{ msg }}</p>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
  </div>
</body>
</html>
